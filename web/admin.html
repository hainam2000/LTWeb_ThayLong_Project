<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/css/shop-homepage.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/header.css">
    <link rel="stylesheet" href="assets/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/responsive.css">
    <link rel="stylesheet" href="assets/css/reset.css">
    <link rel="stylesheet" href="/assets/css/admin.css">
</head>
<body>
  <header>
    <div>
      <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
          <div style="margin-left: -50px">
            <a class="navbar-brand" href="#" ><img src="http://localhost:8080/LTWeb_war_exploded/assets/images/data/logo_divine_pure_white.png" style="margin-top: -5px; width:50px;height: auto;"></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
          </div>
          <div style="float: left; margin-left: -10px;">
            <div class="collapse navbar-collapse" id="navbarResponsive">
              
            </div>
          </div>
            <div class="header-container__mid--search">
              <form class="search-form">
              <input type="text" placeholder="Input product name..." name="search">
              <button value="search" type="submit"><i class="fa fa-search" aria-hidden="true"></i></button>
              </form>
            </div>
          <div style="margin-left: 0px;">
            <div class="collapse navbar-collapse" id="navbarResponsive">
              <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                  <a class="nav-link" href="#" style="text-align: center;">Tài Khoản</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#" style="text-align: center;">Đăng Xuất</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
        </nav>
      </div>
    </header>

    <div>
        <aside class="menu-sidebar d-none d-lg-block">
            <div class="menu-sidebar__content js-scrollbar1 ps">
                <nav class="navbar-sidebar">
                    <ul class="list-unstyled navbar__list">
                        <li>
                            <a class="user" href="admin.html"><!-- style="color: red"-->
                                <i class="fa fa-user"></i>Quản lí người dùng</a>
    
                        </li>
                        <li>
                            <a  href="#">
                                <i class="fa fa-shopping-cart" aria-hidden="true"></i> Quản lí đơn hàng</a>
                        </li>
    
                    </ul>
                </nav>
            </div>
        </aside>
    </div>

    <div class="contain-main">
        <div class="add-user">
            <div class="content">
                <span>Nhập thông tin khách hàng</span>
            </div>
            <div style="margin-top: 10px;" class="add-form">
                <form id="form-add-user" method="post" action="">
                    <div class="input_box">
                        <div class="text">
                            <span>Tên khách hàng</span>
                            <input type="text" name="index" id="index" value="" hidden="true">
                        </div>
                        <div class="input__">
                            <input id="username" type="text" name="username">
                        </div>
                        <div class="err">
                            <span id="errorname"></span>
                        </div>
                    </div>
                    <div class="input_box">
                        <div class="text">
                            <span>Mã khách hàng</span>
                        </div>
                        <div class="input__">
                            <input id="id-user" type="text" name="id-user">
                        </div>
                        <div class="err">
                            <span id="errorid"></span>
                        </div>
                    </div>
                    <div class="input_box">
                        <div class="text">
                            <span>Tên tài khoản</span>
                        </div>
                        <div class="input__">
                            <input id="id-user" type="text" name="id-user">
                        </div>
                        <div class="err">
                            <span id="errorid"></span>
                        </div>
                    </div>
                    <div class="input_box">
                        <div class="text">
                            <span>Mật khẩu</span>
                        </div>
                        <div class="input__">
                            <input id="id-user" type="password" name="id-user">
                        </div>
                        <div class="err">
                            <span id="errorid"></span>
                        </div>
                    </div>
                    <div class="input_box">
                        <div class="text">
                            <span>Email</span>
                        </div>
                        <div class="input__">
                            <input id="email" type="text" name="email">
                        </div>

                        <div class="err">
                            <span id="erroremail"></span>

                        </div>
                    </div>
                    <div class="input_box">
                        <div class="text">
                            <span>Số điện thoại</span>
                        </div>
                        <div class="input__">
                            <input id="phone" type="text" name="phone">
                        </div>
                        <div class="err">
                            <span id="errorphone"></span>

                        </div>
                    </div>
                    <div class="input_box">
                        <div class="text">
                            <span>Địa chỉ</span>
                        </div>
                        <div class="input__">
                            <input id="address" type="text" name="address">
                        </div>

                        <div class="err">
                            <span id="erroraddress"></span>

                        </div>
                    </div>
                    <div class="button">
                        <input type="submit" value="Cập nhật" onclick="addUser();return false">
                        <input type="reset" value="Tải lại">

                    </div>


                </form>

            </div>

        </div>
        <table class="table table-data2" id="data-list">
            <thead>
            <tr>
                <th>STT</th>
                <th>Mã KH</th>
                <th>Tên KH</th>
                <th>Tên TK</th>
                <th>Mật khẩu</th>
                <th>Email</th>
                <th>Số điện thoại</th>
                <th>Địa chỉ</th>
                <th>Tác vụ</th>

            </tr>
            </thead>
            <tbody id="result">

            </tbody>
        </table>
    </div>


    <script type="text/javascript">
        var count = 0;
        var dataList = [];
    
        function addUser() {
            var index = document.getElementById('index').value;
            var username = document.getElementById("username").value;
            var id = document.getElementById("id-user").value;
            var email = document.getElementById("email").value;
            var phone = document.getElementById("phone").value;
            var address = document.getElementById("address").value;
            var letter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
            var checkname = false;
            var checkid = false;
            var checkphone = false;
            var checkaddress = false;
            var checkemail = false;
    
            /*<=============================Kiem tra du lieu=============================>*/
    
            //ktra name
            if (username == "") {
                document.getElementById("errorname").innerHTML = "Vui lòng nhập tên khách hàng";
            } else {
                document.getElementById("errorname").innerHTML = "";
                checkname = true;
            }
    
            // kiem tra ma KH
            if (id == "") {
                document.getElementById("errorid").innerHTML = " Vui lòng nhập mã khách hàng"
            } else {
                document.getElementById("errorid").innerHTML = "";
                checkid = true;
    
            }
    
            //ktra email
            if (email == "") {
                document.getElementById("erroremail").innerHTML = "Vui lòng nhập email";
    
            } else if (!email.match(letter)) {
                document.getElementById("erroremail").innerHTML = "Vui lòng nhập đúng định dạng email";
    
    
            } else {
                document.getElementById("erroremail").innerHTML = "";
                checkemail = true;
    
            }
    
            //ktra phone
            if (phone == "") {
                document.getElementById("errorphone").innerHTML = "Vui lòng nhập số điện thoại";
            } else if (isNaN(phone)) {
                document.getElementById("errorphone").innerHTML = "Chỉ cho phép nhập số";
            } else {
                document.getElementById("errorphone").innerHTML = "";
                checkphone = true;
    
            }
    
    
            //ktra dia chi
            if (address == "") {
                document.getElementById("erroraddress").innerHTML = "Vui lòng nhập địa chỉ";
            } else {
                document.getElementById("erroraddress").innerHTML = "";
                checkaddress = true;
    
            }
    
    
            /*< ==================== them du lieu vao bang ====================>*/
            if (checkname == true && checkid == true && checkaddress == true && checkphone == true && checkemail == true) {
                var user = {
                    "username": username,
                    "id": id,
                    "email": email,
                    "phone": phone,
                    "address": address,
    
                }
                dataList.push(user);
    
    
                var dataListTag = document.getElementById("result");
                dataListTag.innerHTML +=
                    `<tr>
                            <td>${++count}</td>
                            <td>${username}</td>
                            <td>${id}</td>
                            <td>${email}</td>
                            <td>${phone}</td>
                            <td>${address}</td>
                            <td><button class="fa fa-edit" onclick="editUser(${count - 1})">Sửa</button>
                            <button class="fa fa-trash" onclick="deleteUser(${count - 1})">Xóa</button></td>
                        </tr>`
            }
    
            //  }
    
            function deleteUser(index) {
                console.log(index)
                dataList.splice(index, 1)
                showUser();
            }
    
            function showUser() {
                document.getElementById('result').innerHTML = ''
    
                for (var i = 0; i < dataList.length; i++) {
                    document.getElementById('result').innerHTML += `<tr>
                            <td>${i + 1}</td>
                            <td>${dataList[i].username}</td>
                            <td>${dataList[i].id}</td>
                            <td>${dataList[i].email}</td>
                            <td>${dataList[i].phone}</td>
                            <td>${dataList[i].address}</td>
                            <td><button class="fa fa-edit" onclick="editUser(${i})">Sửa</button>
                            <button class="fa fa-trash" onclick="deleteUser(${i})">Xóa</button></td>
                        </tr>`
                }
            }
    
            function editUser(index) {
                var user = dataList[index]
                console.log(user)
                document.getElementById('index').value = index
                document.getElementById('username').value = user.username
                document.getElementById('id-user').value = user.id
                document.getElementById('email').value = user.email
                document.getElementById('phone').value = user.phone
                document.getElementById('address').value = user.address
    
            }
        }
    </script>
</body>
</html>